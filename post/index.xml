<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Posts on Ashz</title><link>https://ashz.xyz/post/</link><description>Recent content in Posts on Ashz</description><generator>Hugo -- gohugo.io</generator><language>id-id</language><lastBuildDate>Sun, 17 Jul 2022 09:10:05 +0700</lastBuildDate><atom:link href="https://ashz.xyz/post/index.xml" rel="self" type="application/rss+xml"/><item><title>Menghubungkan USB ke WSL2</title><link>https://ashz.xyz/p/menghubungkan-usb-ke-wsl2/</link><pubDate>Sun, 17 Jul 2022 09:10:05 +0700</pubDate><guid>https://ashz.xyz/p/menghubungkan-usb-ke-wsl2/</guid><description>&lt;p>Saya setiap harinya menggunakan laptop dengan sistem operasi linux. Namun kadang menggunakan PC dirumah yang menggunakan OS Windows, tapi juga saya pasang WSL2 karena sudah terbiasa dengan lingkungan linux, seperti untuk kebutuhan ssh dan lainnya. Suatu saat saya ingin menggunakan &lt;code>esptool&lt;/code> untuk flash firmware ESP8266 ataupun mau monitoring serial console nya di PC Windows, ketika saya pasang USB to Serial FTDI tidak muncul di list &lt;code>ls -l /dev/ttyUSB*&lt;/code> maupun &lt;code>lsusb&lt;/code> pada WSL2.&lt;/p>
&lt;p>&lt;img src="https://ashz.xyz/p/menghubungkan-usb-ke-wsl2/list-usb-wsl.png"
width="670"
height="100"
srcset="https://ashz.xyz/p/menghubungkan-usb-ke-wsl2/list-usb-wsl_hu21992abed2c78c1d3c7ab06425935471_9427_480x0_resize_box_3.png 480w, https://ashz.xyz/p/menghubungkan-usb-ke-wsl2/list-usb-wsl_hu21992abed2c78c1d3c7ab06425935471_9427_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="menampilkan list usb di wsl"
class="gallery-image"
data-flex-grow="670"
data-flex-basis="1608px"
>&lt;/p>
&lt;h2 id="install-usbipd">Install usbipd&lt;/h2>
&lt;p>Kemudian saya cari cari apakah bisa USB TTL di Windows bisa diakses di WSL2, dan menemukan &lt;a class="link" href="https://github.com/dorssel/usbipd-win" target="_blank" rel="noopener"
>usbipd-win&lt;/a>. Cara install nya gampang, buka Powershell sebagai Administrator, kemudian jalankan &lt;code>winget install usbipd&lt;/code>, proses instalasi akan langsung berjalan, pastikan koneksi internet stabil.&lt;/p>
&lt;p>&lt;img src="https://ashz.xyz/p/menghubungkan-usb-ke-wsl2/install-usbipd.png"
width="690"
height="220"
srcset="https://ashz.xyz/p/menghubungkan-usb-ke-wsl2/install-usbipd_hu77ee69f8ae92236efc6973692120518d_15411_480x0_resize_box_3.png 480w, https://ashz.xyz/p/menghubungkan-usb-ke-wsl2/install-usbipd_hu77ee69f8ae92236efc6973692120518d_15411_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="perintah dan proses instalasi usbipd"
class="gallery-image"
data-flex-grow="313"
data-flex-basis="752px"
>&lt;/p>
&lt;p>Setelah proses install selesai, tutup window powershell dan buka lagi sebagai Administrator. Jalankan perintah &lt;code>usbipd&lt;/code> jika muncul tampilan berikut berarti usbipd sudah terinstall.&lt;/p>
&lt;p>&lt;img src="https://ashz.xyz/p/menghubungkan-usb-ke-wsl2/perintah-usbipd.png"
width="670"
height="400"
srcset="https://ashz.xyz/p/menghubungkan-usb-ke-wsl2/perintah-usbipd_hu358310fc756499ce70c4263a834b001d_21158_480x0_resize_box_3.png 480w, https://ashz.xyz/p/menghubungkan-usb-ke-wsl2/perintah-usbipd_hu358310fc756499ce70c4263a834b001d_21158_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="test menjalankan perintah usbipd"
class="gallery-image"
data-flex-grow="167"
data-flex-basis="402px"
>&lt;/p>
&lt;h2 id="menggunakan-aplikasi-usbipd">Menggunakan aplikasi usbipd&lt;/h2>
&lt;p>Dari gambar diatas sudah ditampilkan dengan jelas daftar perintah juga keterangan dari perintah tersebut&lt;/p>
&lt;p>&lt;img src="https://ashz.xyz/p/menghubungkan-usb-ke-wsl2/menampilkan-usb-terhubung.png"
width="670"
height="180"
srcset="https://ashz.xyz/p/menghubungkan-usb-ke-wsl2/menampilkan-usb-terhubung_hu32a8df10498ac819360c25e7533ff62e_11336_480x0_resize_box_3.png 480w, https://ashz.xyz/p/menghubungkan-usb-ke-wsl2/menampilkan-usb-terhubung_hu32a8df10498ac819360c25e7533ff62e_11336_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="menampilkan daftar usb yang terhubung ke PC"
class="gallery-image"
data-flex-grow="372"
data-flex-basis="893px"
>&lt;/p>
&lt;p>&lt;img src="https://ashz.xyz/p/menghubungkan-usb-ke-wsl2/usb-wsl.png"
width="670"
height="119"
srcset="https://ashz.xyz/p/menghubungkan-usb-ke-wsl2/usb-wsl_hu6a40ee87782c9b6220980f3b521a0995_10074_480x0_resize_box_3.png 480w, https://ashz.xyz/p/menghubungkan-usb-ke-wsl2/usb-wsl_hu6a40ee87782c9b6220980f3b521a0995_10074_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="menampilkan daftar usb yang terhubung ke WSL"
class="gallery-image"
data-flex-grow="563"
data-flex-basis="1351px"
>&lt;/p>
&lt;p>Perhatikan pada bagian perangkat USB Serial Converter, dari kedua perintah diatas menampilkan status usb nya &lt;strong>Not shared&lt;/strong> dan &lt;strong>Not attached&lt;/strong> ini menandakan USB serialnya belum terhubung ke WSL. Untuk menghubungkan USB Serial Converter agar bisa diakses melalui WSL, jalankan perintah &lt;code>usbipd wsl attach -b &amp;lt;BUSID&amp;gt;&lt;/code>. BUSID adalah Bus ID yang ditampilkan pada list perangkat, untuk kasus ini USB Serial memiliki Bus ID &lt;code>5-3&lt;/code>.&lt;/p>
&lt;h2 id="error-attach">Error attach&lt;/h2>
&lt;p>Jika terjadi error ketika menjalankan perintah attash, seperti error birikut ini:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-powershell" data-lang="powershell">&lt;span class="line">&lt;span class="cl">&lt;span class="n">usbipd&lt;/span>&lt;span class="err">:&lt;/span> &lt;span class="n">error&lt;/span>&lt;span class="err">:&lt;/span> &lt;span class="n">WSL&lt;/span> &lt;span class="s1">&amp;#39;usbip&amp;#39;&lt;/span> &lt;span class="n">client&lt;/span> &lt;span class="n">not&lt;/span> &lt;span class="n">correctly&lt;/span> &lt;span class="n">installed&lt;/span>&lt;span class="p">.&lt;/span> &lt;span class="n">See&lt;/span> &lt;span class="n">https&lt;/span>&lt;span class="err">:&lt;/span>&lt;span class="p">//&lt;/span>&lt;span class="n">github&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="p">/&lt;/span>&lt;span class="n">dorssel&lt;/span>&lt;span class="p">/&lt;/span>&lt;span class="nb">usbipd-win&lt;/span>&lt;span class="p">/&lt;/span>&lt;span class="n">wiki&lt;/span>&lt;span class="p">/&lt;/span>&lt;span class="nb">WSL-support&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">latest&lt;/span> &lt;span class="n">instructions&lt;/span>&lt;span class="p">.&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Solusinya sudah ditunjukan pada keterangan errornya, kunjungi link yang tertera, ikuti petunjuk selanjutnya. Kurang lebih jalankan perintah seperti dibawah ini:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># jalankan perintah ini di WSL&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo apt install linux-tools-virtual hwdata
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo update-alternatives --install /usr/local/bin/usbip usbip &lt;span class="sb">`&lt;/span>ls /usr/lib/linux-tools/*/usbip &lt;span class="p">|&lt;/span> tail -n1&lt;span class="sb">`&lt;/span> &lt;span class="m">20&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Setelah sukses menjalankan perintah diatas, jalankan lagi perintah &lt;code>usbipd wsl attach -b 5-3&lt;/code> di Powershell. Status USB Serial sudah &lt;strong>Attached&lt;/strong>.&lt;/p>
&lt;p>&lt;img src="https://ashz.xyz/p/menghubungkan-usb-ke-wsl2/perintah-attach.png"
width="730"
height="290"
srcset="https://ashz.xyz/p/menghubungkan-usb-ke-wsl2/perintah-attach_hu9c83728ba38e3baa1e57fbba4025b1bf_20731_480x0_resize_box_3.png 480w, https://ashz.xyz/p/menghubungkan-usb-ke-wsl2/perintah-attach_hu9c83728ba38e3baa1e57fbba4025b1bf_20731_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="perintah attach untuk menghubungkan usb ke wsl"
class="gallery-image"
data-flex-grow="251"
data-flex-basis="604px"
>&lt;/p>
&lt;h2 id="cek-list-usb-wsl">Cek list usb wsl&lt;/h2>
&lt;p>Jika usb sudah di hubungkan menggunakan aplikasi &lt;code>usbipd&lt;/code>, kemudian tes dari sisi WSL apakah USB Serial sudah terdeteksi.&lt;/p>
&lt;p>&lt;img src="https://ashz.xyz/p/menghubungkan-usb-ke-wsl2/list-usb-setelah-terhubung.png"
width="810"
height="110"
srcset="https://ashz.xyz/p/menghubungkan-usb-ke-wsl2/list-usb-setelah-terhubung_huf4efd9fed3b90c4f0c629277d2bf7d89_14434_480x0_resize_box_3.png 480w, https://ashz.xyz/p/menghubungkan-usb-ke-wsl2/list-usb-setelah-terhubung_huf4efd9fed3b90c4f0c629277d2bf7d89_14434_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="melihat list usb yang terhubung ke wsl"
class="gallery-image"
data-flex-grow="736"
data-flex-basis="1767px"
>&lt;/p>
&lt;h2 id="test-monitoring-serial-console-esp01">Test monitoring serial console ESP01&lt;/h2>
&lt;p>Setelah menghubungkan ESP01 dengan FTDI Serial dan sudah terdeteksi oleh WSL, saatnya tes monitoring serial console ESP01 melalui terminal pada WSL. Untuk monitoring serial console ini saya menggunakan aplikasi &lt;code>screen&lt;/code>, dan sebagai catatan &lt;code>/dev/ttyUSB*&lt;/code> pada WSL owner dan group nya adalah &lt;code>root&lt;/code>, maka untuk menjalankan perintah screen harus diawali dengan sudo.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># /dev/ttyUSB0 adalah lokasi device usb serial&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 115200 adalah baudrate, nilai bisa disesuaikan&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo screen /dev/ttyUSB0 &lt;span class="m">115200&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Setelah menjalankan perintah diatas tampilan akan blank, tunggu beberapa saat akan muncul log serial console. Jika tidak muncul apapun lakukan perintah reset pada device. Jika muncul log tampilan karakter tidak jelas, kemungkinan perlu merubah nilai baudrate.&lt;/p>
&lt;p>&lt;img src="https://ashz.xyz/p/menghubungkan-usb-ke-wsl2/serial-console.png"
width="810"
height="142"
srcset="https://ashz.xyz/p/menghubungkan-usb-ke-wsl2/serial-console_hubdd1d07800127fa7f67f235d9b640cde_12231_480x0_resize_box_3.png 480w, https://ashz.xyz/p/menghubungkan-usb-ke-wsl2/serial-console_hubdd1d07800127fa7f67f235d9b640cde_12231_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="tampilan log serial console ESP01"
class="gallery-image"
data-flex-grow="570"
data-flex-basis="1369px"
>&lt;/p></description></item><item><title>Membuat MQTT Broker</title><link>https://ashz.xyz/p/membuat-mqtt-broker/</link><pubDate>Mon, 11 Jul 2022 11:27:34 +0700</pubDate><guid>https://ashz.xyz/p/membuat-mqtt-broker/</guid><description>&lt;p>Kali ini saya akan membuat mqtt broker menggunakan Eclipse Mosquitto, selain gratis, setup nya juga gampang (setidaknya untuk kebutuhan sendiri). Mosquitto akan dijalankan di dalam container docker menggunakan aplikasi portainer. Portainer adalah aplikasi GUI berbasis web yang memudahkan untuk manajemen docker.&lt;/p>
&lt;h2 id="persiapan-file-dan-direktori">Persiapan file dan direktori&lt;/h2>
&lt;p>Container Mosquitto membutuhkan 3 folder untuk menyimpan konfigurasi, data dan log&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># perintah untuk membuat 3 folder&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mkdir -p mosquitto/&lt;span class="o">{&lt;/span>config,data,log&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Kemudian membuat file konfigurasi awal mosquitto&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># membuat file mosquitto.conf&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">vi mosquitto/config/mosquitto.conf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>isi file konfigurasi&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># file mosquitto.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">allow_anonymous true # untuk konek ke broker tanpa menggunakan user &amp;amp; password
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">persistence true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">persistence_location /mosquitto/data
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># simpan log ke dalam file
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">log_dest file /mosquitto/log/mosquitto.log
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># menampilkan log ke stdout docker
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># log_dest stdout
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">listener 1883 # default port
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="konfigurasi-di-portainer">Konfigurasi di portainer&lt;/h2>
&lt;p>Untuk membuat container di portainer, pilih menu Containers &amp;gt; Add container. Di halaman Create container isikan parameter berikut:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Name&lt;/strong>: mosquitto&lt;/li>
&lt;li>&lt;strong>Image&lt;/strong>: eclipse-mosquitto&lt;/li>
&lt;li>&lt;strong>Manual network port publishing&lt;/strong>:
&lt;ul>
&lt;li>&lt;strong>host&lt;/strong>: 1883 &amp;gt; &lt;strong>container&lt;/strong>: 1883, port untuk &lt;strong>host&lt;/strong> bisa menggunakan port acak, tidak harus sama 1883&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>Command &amp;amp; logging&lt;/strong>:
&lt;ul>
&lt;li>&lt;strong>User&lt;/strong>: 1883, untuk user &lt;strong>mosquitto&lt;/strong> di dalam container&lt;/li>
&lt;li>&lt;strong>Console&lt;/strong>: Interactive &amp;amp; TTY&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>Volumes&lt;/strong>: container &amp;gt; host
&lt;ul>
&lt;li>/mosquitto/config/mosquitto.conf &amp;gt; /home/orangepi/mosquitto/config/mosquitto.conf&lt;/li>
&lt;li>/mosquitto/data &amp;gt; /home/orangepi/mosquitto/data&lt;/li>
&lt;li>/mosquitto/log &amp;gt; /home/orangepi/mosquitto/log&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>Restart policy&lt;/strong>: Always&lt;/li>
&lt;/ul>
&lt;p>Setelah semua diisi, klik &lt;strong>Deploy the container&lt;/strong>. Setelah container sukses dibuat dan status running, Saatnya testing.&lt;/p>
&lt;h2 id="test-koneksi-broker">Test koneksi broker&lt;/h2>
&lt;p>Testing broker mqtt menggunakan aplikasi MQTT Explorer, isi parameter berikut:
&lt;strong>Nama&lt;/strong>: mqtt broker, &lt;em>isi nama untuk koneksi&lt;/em>
&lt;strong>Protocol&lt;/strong>: mqtt://
&lt;strong>Host&lt;/strong>: 10.0.11.240, &lt;em>alamat IP broker&lt;/em>
&lt;strong>Port&lt;/strong>: 1883, &lt;em>port listener mosquitto, sesuaikan dengan setting port host&lt;/em>
Username dan password, sementara dikosongkan
Klik &lt;strong>Save&lt;/strong> dan &lt;strong>Connect&lt;/strong>&lt;/p>
&lt;p>Jika koneksi berhasil, akan muncul tampilan explore mqtt broker, dan di log mosquitto mucul log baru :&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">1657180721: New client connected from 10.0.11.240:56026 as mqtt-explorer-0261386d (p2, c1, k60).
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Untuk cek log, jalankan perintah &lt;code>sudo tail -f mosquitto/log/mosquitto.log&lt;/code>. Jika file konfigurasi &lt;em>log_dest&lt;/em> di set &lt;em>stdout&lt;/em>, untuk cek log &lt;code>docker logs -f mosquitto&lt;/code>&lt;/p>
&lt;h2 id="menambahkan-user-untuk-akses-broker">Menambahkan user untuk akses broker&lt;/h2>
&lt;p>Sangat penting untuk setting akun untuk otentikasi, agar tidak sembarang pengguna bisa mengakses mqtt broker.&lt;/p>
&lt;h3 id="membuat-password-file">Membuat password file&lt;/h3>
&lt;p>Untuk membuat password file gunakan perintah &lt;code>mosquito_passwd&lt;/code>, perintah lengkapnya sebagai berikut &lt;code>mosquitto_passwd -c &amp;lt;password file&amp;gt; &amp;lt;username&amp;gt;&lt;/code>, parameter &lt;code>-c&lt;/code> untuk membuat file baru. Karena saya membuat mosquitto di dalam docker container, jadi untuk menjalankan &lt;code>mosquitto_passwd&lt;/code> harus diawali dengan perintah &lt;em>docker exec&lt;/em>, &lt;code>docker exec -it &amp;lt;nama container&amp;gt; &amp;lt;perintah&amp;gt;&lt;/code>&lt;/p>
&lt;p>Perintah lengkap :&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># eksekusi perintah untuk membuat user mosquitto&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker &lt;span class="nb">exec&lt;/span> -it mosquitto mosquitto_passwd -c /mosquitto/config/passwd ashoka
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Setelah menjalankan perintah diatas maka akan muncul prompt untuk memasukkan password, ketik password kemudian enter dan ulangi password untuk konfirmasi.&lt;/p>
&lt;p>Untuk cek file hasil dari perintah diatas, jalankan perintah&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># melihat isi file passwd&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker &lt;span class="nb">exec&lt;/span> -it mosquitto cat /mosquitto/config/passwd
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>File akan berisi username dan password yang telah dienkripsi.&lt;/p>
&lt;h3 id="update-file-config">Update file config&lt;/h3>
&lt;p>Untuk menerapkan otentikasi pada broker, harus ditambahkan konfigurasi untuk memuat file password yang sudah dibuat tadi&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">#file: mosquitto/config/mosquitto.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">allow_anonymous true # biarkan anonim tetap true dulu
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">persistence true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">persistence_location /mosquitto/data
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">log_dest file /mosquitto/log/mosquitto.log
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">listener 1883
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">password_file /mosquitto/config/passwd # baris ini yang ditambahkan
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Setelah update file config, restart container mosquitto, kemudian test menggunakan MQTT explorer
jika sudah berhasil test login mqtt explorer dengan username dan password yang baru dibuat,
maka parameter file konfigurasi &lt;code>allow_anonymous true&lt;/code> perlu diubah menjadi &lt;code>allow_anonymous false&lt;/code> agar tidak sembarang orang bisa mengakses broker mosquitto.&lt;/p></description></item><item><title>Upgrade Portainer</title><link>https://ashz.xyz/p/upgrade-portainer/</link><pubDate>Wed, 06 Jul 2022 19:24:35 +0700</pubDate><guid>https://ashz.xyz/p/upgrade-portainer/</guid><description>&lt;p>Upgrade portainer dari versi 2.13.1 ke 2.14&lt;/p>
&lt;h2 id="proses-backup-setting">Proses backup setting&lt;/h2>
&lt;p>Sebelum melakukan ugrade alangkah baiknya melakukan proses backup terlebih dahulu, agar jika terjadi kesalahan kita dapat melakukan restore ke setting sebelumnya.&lt;/p>
&lt;p>Untuk melakukan backup lakukan perintah berikut:&lt;/p>
&lt;ul>
&lt;li>login sebagai admin&lt;/li>
&lt;li>masuk ke menu Setting &amp;gt; Backup portainer&lt;/li>
&lt;li>hasil backup dapat diproteksi menggunakan enkripsi password, jika memilih password protect&lt;/li>
&lt;li>klik download backup&lt;/li>
&lt;/ul>
&lt;h2 id="proses-upgrade-portainer">Proses upgrade portainer&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># stop container portainer&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker stop portainer
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># hapus container portainer&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker rm portainer
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># pull image portainer versi terbaru&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker pull portainer/portainer-ce:latest
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># deploy portainer versi terbaru&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker run -d -p 8000:8000 -p 9443:9443 &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --name&lt;span class="o">=&lt;/span>portainer --restart&lt;span class="o">=&lt;/span>always &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -v /var/run/docker.sock:/var/run/docker.sock &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -v portainer_data:/data &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> portainer/portainer-ce:latest
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="selesai">Selesai&lt;/h2>
&lt;p>Upgrade selesai, test portainer versi terbaru di browser https://IP-ADDRESS:9443/&lt;/p></description></item><item><title>Sensor Suhu Dan Kelembaban</title><link>https://ashz.xyz/p/sensor-suhu-dan-kelembaban/</link><pubDate>Wed, 20 Apr 2022 21:13:17 +0700</pubDate><guid>https://ashz.xyz/p/sensor-suhu-dan-kelembaban/</guid><description>&lt;p>Membuat rangkaian IOT untuk memonitoring suhu dan kelembaban tanpa perlu repot koding dan kompilasi kode.&lt;/p>
&lt;h2 id="persiapan-alat-dan-bahan">Persiapan alat dan bahan&lt;/h2>
&lt;p>Beberapa alat dan bahan yang perlu disipkan adalah sebagai berikut:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Breadboard&lt;/strong>, untuk memasang rangkaian&lt;/li>
&lt;li>&lt;strong>Wemos D1 mini&lt;/strong> (atau modul esp8266 lainnya)&lt;/li>
&lt;li>&lt;strong>Sensor DHT22&lt;/strong>, sensor suhu dan kelembaban&lt;/li>
&lt;li>&lt;strong>Kabel jumper&lt;/strong>, untuk menghubungkan rangkaian tentunya&lt;/li>
&lt;li>&lt;strong>Kabel data&lt;/strong>, untuk flash firmware dan suplai power&lt;/li>
&lt;li>Dan tentunya membutuhkan &lt;strong>Laptop/PC&lt;/strong> dan &lt;strong>koneksi internet&lt;/strong>&lt;/li>
&lt;/ul>
&lt;h2 id="skema-rangkaian">Skema rangkaian&lt;/h2>
&lt;p>Rangkaian sederhanyanya seperti ini:&lt;/p>
&lt;ul>
&lt;li>Kaki pin negatif (-) pada dht22 dihubungkan ke ground pada wemos&lt;/li>
&lt;li>Kaki pin positif (+) pada dht22 dihubungkan ke 3V pada wemos&lt;/li>
&lt;li>Kaki pin output (data) pada dht22 dihubungkan ke D7 pada wemos&lt;/li>
&lt;li>Kabel data dihubungkan ke wemos dan laptop&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://ashz.xyz/p/sensor-suhu-dan-kelembaban/rangkaian-wemos-dht22.jpg"
width="1500"
height="1500"
srcset="https://ashz.xyz/p/sensor-suhu-dan-kelembaban/rangkaian-wemos-dht22_hud2dcb8584df5d4ab172893fa36e93b52_410017_480x0_resize_q75_box.jpg 480w, https://ashz.xyz/p/sensor-suhu-dan-kelembaban/rangkaian-wemos-dht22_hud2dcb8584df5d4ab172893fa36e93b52_410017_1024x0_resize_q75_box.jpg 1024w"
loading="lazy"
alt="rangkaian wemos dan dht22"
class="gallery-image"
data-flex-grow="100"
data-flex-basis="240px"
>&lt;/p>
&lt;h2 id="flash-firmware">Flash firmware&lt;/h2>
&lt;p>Firmware yang akan digunakan adalah &lt;a class="link" href="https://tasmota.github.io/docs/About/" target="_blank" rel="noopener"
>Tasmota&lt;/a>. Tasmota adalah firmware open source untuk chipset berbasis Espressif (ESPxxx). Berikut ini langkah-langkah untuk flash tasmota ke wemos:&lt;/p>
&lt;ul>
&lt;li>Buka &lt;a class="link" href="https://tasmota.github.io/install/" target="_blank" rel="noopener"
>Tasmota Web Installer&lt;/a>&lt;/li>
&lt;li>Hubungkan wemos ke laptop dengan kabel data&lt;/li>
&lt;li>Pilih versi firmware, untuk saat ini versi &lt;strong>Release Tasmota (english)&lt;/strong>&lt;/li>
&lt;li>Klik &lt;strong>Connect&lt;/strong> untuk memilih serial port dari wemos&lt;/li>
&lt;li>Pilih install release tasmota&lt;/li>
&lt;li>Check erase device, kemudian klik Install, ditunggu prosesnya, jangan pindah kemana mana&lt;/li>
&lt;li>Setelah install selesai, klik next untuk menghubungkan tasmota ke wifi&lt;/li>
&lt;li>Hubungkan ke wifi, kemudian klik visit device, akan muncul tampilan awal tasmota&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://ashz.xyz/p/sensor-suhu-dan-kelembaban/tampilan-awal-tasmota.png"
width="423"
height="516"
srcset="https://ashz.xyz/p/sensor-suhu-dan-kelembaban/tampilan-awal-tasmota_hu29a191dcbd72cb66c46c0aa9e8190696_21706_480x0_resize_box_3.png 480w, https://ashz.xyz/p/sensor-suhu-dan-kelembaban/tampilan-awal-tasmota_hu29a191dcbd72cb66c46c0aa9e8190696_21706_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="tampilan awal tasmota"
class="gallery-image"
data-flex-grow="81"
data-flex-basis="196px"
>&lt;/p>
&lt;h2 id="konfigurasi-tasmota">Konfigurasi tasmota&lt;/h2>
&lt;h3 id="konfigurasi-modul">Konfigurasi modul&lt;/h3>
&lt;p>Hal pertama yang perlu di sesuaikan adalah modul pada tasmota, karena kali ini menggunakan wemos maka konfigurasinya seperti ini:&lt;/p>
&lt;ul>
&lt;li>Pilih menu Configuration &amp;gt; Configure Module &amp;gt; pilih module type &lt;strong>Generic (18)&lt;/strong> &amp;gt; Save&lt;/li>
&lt;li>Tunggu hingga tasmota restart dan kembali ke halaman awal&lt;/li>
&lt;li>Pilih menu Configuration &amp;gt; Configure Module, maka tampilan module akan seperti ini&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://ashz.xyz/p/sensor-suhu-dan-kelembaban/tasmota-generic-18.png"
width="354"
height="697"
srcset="https://ashz.xyz/p/sensor-suhu-dan-kelembaban/tasmota-generic-18_hu1c0241f159ddd144315cef9db3dcb878_48093_480x0_resize_box_3.png 480w, https://ashz.xyz/p/sensor-suhu-dan-kelembaban/tasmota-generic-18_hu1c0241f159ddd144315cef9db3dcb878_48093_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="tampilan module generic 18"
class="gallery-image"
data-flex-grow="50"
data-flex-basis="121px"
>&lt;/p>
&lt;h3 id="sesuaikan-pin-dengan-rangkaian">Sesuaikan pin dengan rangkaian&lt;/h3>
&lt;p>Setelah modul generic diaktifkan, selanjutnya kita perlu menyesuaikan pin modul sesuai &lt;a class="link" href="#skema-rangkaian" >skema rangkaian&lt;/a>. Karena hanya ada satu komponen yang terhubung, jadi hanya satu pin saja yang perlu disesuaikan yaitu pin D7 untuk output dari sensor DHT22. Untuk sensor DHT22 di tasmota kita bisa menggunakan nama sensor &lt;strong>AM2301&lt;/strong>. Info lebih lanjut tentang komponen gpio &lt;a class="link" href="https://tasmota.github.io/docs/Components/#gpios" target="_blank" rel="noopener"
>disini&lt;/a>;&lt;/p>
&lt;ul>
&lt;li>Pada tampilah halaman module, temukan pin &lt;strong>D7 GPIO13&lt;/strong>&lt;/li>
&lt;li>Klik dropdown dan pilih &lt;strong>AM2301&lt;/strong>&lt;/li>
&lt;li>(opsional) pada pin &lt;strong>D4 GPIO2&lt;/strong> pilih dropdown &lt;strong>LedLink&lt;/strong> untuk menyalakan led built-in sebagai indikator status&lt;/li>
&lt;li>Klik &lt;strong>Save&lt;/strong>, tunggu hingga restart dan kembali ke halaman awal&lt;/li>
&lt;li>Jika rangkaian sudah benar maka di halaman depan akan muncul deteksi dari sensor, dan led built-in akan menyala/berkedip&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://ashz.xyz/p/sensor-suhu-dan-kelembaban/tasmota-sensor-dht22.png"
width="390"
height="460"
srcset="https://ashz.xyz/p/sensor-suhu-dan-kelembaban/tasmota-sensor-dht22_hu47318a3b0a7c210874de126de243c21c_25039_480x0_resize_box_3.png 480w, https://ashz.xyz/p/sensor-suhu-dan-kelembaban/tasmota-sensor-dht22_hu47318a3b0a7c210874de126de243c21c_25039_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="tampilan tasmota sudah mendeteksi sensor dht22"
class="gallery-image"
data-flex-grow="84"
data-flex-basis="203px"
>&lt;/p>
&lt;p>Mudah sekali kan ? tanpa perlu menulis kode dan kompilasi kode menggunakan arduino IDE, kita bisa membuat rangkaian sensor dht22 dengan wemos d1 mini untuk monitoring suhu dan kelembaban. Hanya perlu menyesuaikan konfigurasi melalui tampilan antarmuka di web.&lt;/p>
&lt;h3 id="konfigurasi-wifi">Konfigurasi Wifi&lt;/h3>
&lt;p>Dengan firmware tasmota kita bisa menambahkan dua koneksi wifi, jadi misal wifi1 tidak tersedia maka akan konek ke wifi2 secara otomatis. Untuk konfigurasi wifi:&lt;/p>
&lt;ul>
&lt;li>Pilih menu Configuration &amp;gt; Configure Wifi&lt;/li>
&lt;li>Masukkan nama wifi dan password yang akan digunakan&lt;/li>
&lt;li>Isikan Hostname, untuk identifikasi nama host di jaringan, misal &lt;strong>sensor-dht22&lt;/strong>&lt;/li>
&lt;li>Klik &lt;strong>Save&lt;/strong>, tunggu hingga restart dan kembali ke halaman awal&lt;/li>
&lt;/ul>
&lt;h3 id="konfigurasi-mqtt">Konfigurasi MQTT&lt;/h3>
&lt;p>MQTT adalah protokol yang biasa digunakan perangkat IOT untuk mengirim(publish) dan/atau menerima(subscribe) data. Untuk menggunakan mqtt kita harus menyiapkan dulu mqtt brokernya. Dalam postingan sebelumnya sudah ada cara untuk membuat container &lt;a class="link" href="https://ashz.xyz/id/p/podman-mqtt-broker/" >mqtt broker&lt;/a>. Sebelum menghubungkan tasmota ke mqtt broker, kita test dulu mqtt brokernya menggunakan aplikasi MQTT-Explorer. Jika sudah terhubung, selanjutnya menghubungkan tasmota ke mqtt broker:&lt;/p>
&lt;ul>
&lt;li>Pilih menu Configuration &amp;gt; Configure MQTT&lt;/li>
&lt;li>&lt;strong>Host&lt;/strong>, diisi dengan alamat IP/domain host mqtt broker, dalam contoh kali ini adalah ip lokal &lt;strong>192.168.136.123&lt;/strong>&lt;/li>
&lt;li>&lt;strong>Port&lt;/strong>, diisi dengan port default mqtt &lt;strong>1883&lt;/strong>&lt;/li>
&lt;li>&lt;strong>Client&lt;/strong>, bisa di biarkan secara default atau diisi dengan, misal &lt;strong>mqttc_dht22&lt;/strong>, nama ini akan muncul di log mqtt broker ketika sudah terhubung.&lt;/li>
&lt;li>&lt;strong>User dan Password&lt;/strong> diisikan dengan user password yang digunakan untuk login ke mqtt broker, dalam contoh kali ini adalah user &lt;strong>ashoka&lt;/strong> dan password &lt;strong>haha&lt;/strong>&lt;/li>
&lt;li>Untuk &lt;strong>Topic&lt;/strong>, kita samakan dengan nama Hostname saja, diisi dengan &lt;strong>%hostname%&lt;/strong>&lt;/li>
&lt;li>&lt;strong>Full topic&lt;/strong>, biarkan default&lt;/li>
&lt;li>Klik &lt;strong>Save&lt;/strong>, tunggu hingga restart dan kembali ke halaman awal&lt;/li>
&lt;li>Jika koneksi ke mqtt broker berhasil maka akan muncul 3 topic baru yang tampil di mqtt explorer yaitu &lt;strong>cmnd, tasmota, tele&lt;/strong>. Dan di dalam sub topic nya muncul nama device kita yang diberi nama sesuai nama hostname tadi, &lt;strong>sensor-dht22&lt;/strong>.&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://ashz.xyz/p/sensor-suhu-dan-kelembaban/tasmota-mqtt-topic.png"
width="727"
height="378"
srcset="https://ashz.xyz/p/sensor-suhu-dan-kelembaban/tasmota-mqtt-topic_hu3f0f05e2a1afa36a7d41c590880ce097_80263_480x0_resize_box_3.png 480w, https://ashz.xyz/p/sensor-suhu-dan-kelembaban/tasmota-mqtt-topic_hu3f0f05e2a1afa36a7d41c590880ce097_80263_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="beberapa topic dari tasmota"
class="gallery-image"
data-flex-grow="192"
data-flex-basis="461px"
>&lt;/p></description></item><item><title>Podman Mqtt Broker</title><link>https://ashz.xyz/p/podman-mqtt-broker/</link><pubDate>Wed, 20 Apr 2022 13:14:51 +0700</pubDate><guid>https://ashz.xyz/p/podman-mqtt-broker/</guid><description>&lt;p>Berikut ini langkah untuk membuat mqtt broker menggunakan eclipse mosquitto di podman&lt;/p>
&lt;h2 id="membuat-container">Membuat container&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>Masuk menu podman container&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Create container, isi field berikut&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Name&lt;/strong> : mqtt&lt;/li>
&lt;li>&lt;strong>Owner&lt;/strong> : User:ashoka&lt;/li>
&lt;li>&lt;strong>Image&lt;/strong> : docker.io/library/eclipse-mosquitto&lt;/li>
&lt;li>&lt;strong>Command&lt;/strong> : /usr/sbin/mosquitto -c /mosquitto/config/mosquitto.conf [tanpa terminal]&lt;/li>
&lt;li>&lt;strong>Port mapping&lt;/strong>:
&lt;ul>
&lt;li>host:1883 container 1883 tcp&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>Volume&lt;/strong>:
&lt;ul>
&lt;li>/home/ashoka/Apps/podman/mqtt/config -&amp;gt; /mosquitto/config writable private&lt;/li>
&lt;li>/home/ashoka/Apps/podman/mqtt/log -&amp;gt; /mosquitto/log writable private&lt;/li>
&lt;li>/home/ashoka/Apps/podman/mqtt/data -&amp;gt; /mosquitto/data writable private&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Buat file dan folder berikut:&lt;/p>
&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">./mqtt/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├── config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│   └── mosquitto.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├── data
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">└── log
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>file ~/A/podman►cat mqtt/config/mosquitto.conf&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">allow_anonymous true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">persistence true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">persistence_location /mosquitto/data/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">log_dest file /mosquitto/log/mosquitto.log
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">listener 1883
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>&lt;strong>Create and run&lt;/strong>&lt;/li>
&lt;/ul>
&lt;h2 id="test-broker-tanpa-user">Test broker tanpa user&lt;/h2>
&lt;p>Jika sudah berhasil running, coba test menggunakan aplikasi MQTT-Explorer atau aplikasi lain.
Isikan parameter berikut:&lt;/p>
&lt;ul>
&lt;li>Name: &lt;strong>broker podman&lt;/strong>&lt;/li>
&lt;li>Protocol: &lt;strong>mqtt://&lt;/strong>&lt;/li>
&lt;li>Host: &lt;strong>localhost&lt;/strong>&lt;/li>
&lt;li>Port: &lt;strong>1883&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://ashz.xyz/p/podman-mqtt-broker/mqtt-explorer-anonim.png"
width="664"
height="440"
srcset="https://ashz.xyz/p/podman-mqtt-broker/mqtt-explorer-anonim_hu7f520427ea5540f52b2fda34212ea855_29329_480x0_resize_box_3.png 480w, https://ashz.xyz/p/podman-mqtt-broker/mqtt-explorer-anonim_hu7f520427ea5540f52b2fda34212ea855_29329_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="test mqtt broker menggunakan mqtt-explorer tanpa login user"
class="gallery-image"
data-flex-grow="150"
data-flex-basis="362px"
>&lt;/p>
&lt;p>Klik &lt;strong>Save&lt;/strong> kemudian klik &lt;strong>Connect&lt;/strong>.&lt;/p>
&lt;p>Jika berhasil maka akan muncul tampilan berikut:&lt;/p>
&lt;p>&lt;img src="https://ashz.xyz/p/podman-mqtt-broker/mqtt-anonim-berhasil.png"
width="344"
height="243"
srcset="https://ashz.xyz/p/podman-mqtt-broker/mqtt-anonim-berhasil_hu6ebe8f958e5242990800f271a74c2807_33258_480x0_resize_box_3.png 480w, https://ashz.xyz/p/podman-mqtt-broker/mqtt-anonim-berhasil_hu6ebe8f958e5242990800f271a74c2807_33258_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="test mqtt broker anonim berhasil"
class="gallery-image"
data-flex-grow="141"
data-flex-basis="339px"
>&lt;/p>
&lt;h2 id="membuat-user">Membuat user&lt;/h2>
&lt;p>Pada konfigurasi mosquitto sebelumnya itu membolehkan/mengizinkan semua orang terhubung ke mqtt broker tanpa menggunakan username dan password. Agar tidak semua orang dapat memantau aktivitas pada broker kita, perlu dibuatkan user dan password untuk membatasi akses ke broker. Berikut ini langkah-langkah untuk membuat user dan password untuk mqtt broker.&lt;/p>
&lt;ul>
&lt;li>Masuk ke console container mqtt&lt;/li>
&lt;li>Jalankan perintah &lt;code>mosquitto_passwd -c /mosquitto/config/passwd ashoka&lt;/code>&lt;/li>
&lt;li>Akan muncul prompt untuk memasukkan password, masukkan password&lt;/li>
&lt;li>Update file &lt;code>mosquitto.conf&lt;/code>, untuk disable anonim dan tambahkan password file&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># file /mosquitto/config/mosquitto.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># disable user anonim
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">allow_anonymous false
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># set lokasi penyimpanan file password
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">password_file /mosquitto/config/passwd
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>Restart container&lt;/li>
&lt;/ul>
&lt;p>Setelah di restart coba konek ke broker dengan tanpa menggunakan user dan password, maka akan ada peringatan &lt;em>&lt;strong>Connection refused: Not authorized&lt;/strong>&lt;/em>. Kemudian coba konek menggunakan user dan password yang tadi sudah dibuat, maka akan berhasil terhubung ke broker.&lt;/p></description></item><item><title>Podman InfluxDB</title><link>https://ashz.xyz/p/podman-influxdb/</link><pubDate>Tue, 19 Apr 2022 10:05:48 +0700</pubDate><guid>https://ashz.xyz/p/podman-influxdb/</guid><description>&lt;p>Membuat container InfluxDB di podman menggunakan fedora cockpit&lt;/p>
&lt;ul>
&lt;li>
&lt;p>Masuk menu podman container&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Create container, isi field berikut&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Name&lt;/strong> : flux2&lt;/li>
&lt;li>&lt;strong>Owner&lt;/strong> : User:ashoka&lt;/li>
&lt;li>&lt;strong>Image&lt;/strong> : docker.io/library/influxdb&lt;/li>
&lt;li>&lt;strong>Command&lt;/strong> : influxd [tanpa terminal]&lt;/li>
&lt;li>&lt;strong>Port mapping&lt;/strong>:
&lt;ul>
&lt;li>host:8086, container:8086 tcp&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>Volume&lt;/strong>:
&lt;ul>
&lt;li>/home/ashoka/Apps/podman/flux2/data -&amp;gt; /var/lib/influxdb2 writable shared&lt;/li>
&lt;li>/home/ashoka/Apps/podman/flux2/config -&amp;gt; /etc/influxdb2 writable shared&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Environment variabel:&lt;/p>
&lt;ul>
&lt;li>DOCKER_INFLUXDB_INIT_MODE=setup&lt;/li>
&lt;li>DOCKER_INFLUXDB_INIT_USERNAME=ashoka&lt;/li>
&lt;li>DOCKER_INFLUXDB_INIT_PASSWORD=Ashokani&lt;/li>
&lt;li>DOCKER_INFLUXDB_INIT_ORG=lokal&lt;/li>
&lt;li>DOCKER_INFLUXDB_INIT_BUCKET=test&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Buat folder berikut:&lt;/p>
&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">└── flux2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">    ├── config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">    └── data
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>&lt;strong>Create and run&lt;/strong>&lt;/li>
&lt;/ul></description></item><item><title>Podman Node-RED</title><link>https://ashz.xyz/p/podman-node-red/</link><pubDate>Tue, 19 Apr 2022 10:05:48 +0700</pubDate><guid>https://ashz.xyz/p/podman-node-red/</guid><description>&lt;p>Membuat container Node-RED di podman menggunakan fedora cockpit&lt;/p>
&lt;ul>
&lt;li>
&lt;p>Masuk menu podman container&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Create container, isi field berikut&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Name&lt;/strong> : nodered&lt;/li>
&lt;li>&lt;strong>Owner&lt;/strong> : User:ashoka&lt;/li>
&lt;li>&lt;strong>Image&lt;/strong> : docker.io/nodered/node-red&lt;/li>
&lt;li>&lt;strong>Command&lt;/strong> : bash [tanpa terminal]&lt;/li>
&lt;li>&lt;strong>Port mapping&lt;/strong>:
&lt;ul>
&lt;li>host:1880, container:1880 tcp&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Environment variabel:&lt;/p>
&lt;ul>
&lt;li>NODE_RED_CREDENTIAL_SECRET=nganu&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>Create and run&lt;/strong>&lt;/p>
&lt;/li>
&lt;/ul></description></item><item><title>Podman Mysql 8</title><link>https://ashz.xyz/p/podman-mysql-8/</link><pubDate>Mon, 18 Apr 2022 11:35:57 +0700</pubDate><guid>https://ashz.xyz/p/podman-mysql-8/</guid><description>&lt;p>Membuat container MySQL 8 di podman menggunakan fedora cockpit&lt;/p>
&lt;ul>
&lt;li>
&lt;p>Masuk menu podman container&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Create container, isi field berikut&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Name&lt;/strong> : mysql8&lt;/li>
&lt;li>&lt;strong>Owner&lt;/strong> : User:ashoka&lt;/li>
&lt;li>&lt;strong>Image&lt;/strong> : docker.io/mysql/mysql-server&lt;/li>
&lt;li>&lt;strong>Command&lt;/strong> : mysqld [tanpa terminal]&lt;/li>
&lt;li>&lt;strong>Port mapping&lt;/strong>:
&lt;ul>
&lt;li>host:3306 container 3306 tcp&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>Volume&lt;/strong>:
&lt;ul>
&lt;li>/home/ashoka/Apps/podman/mysql8/custom.cnf -&amp;gt; /etc/my.cnf.d/custom.cnf writable shared&lt;/li>
&lt;li>/home/ashoka/Apps/podman/mysql8/initdb -&amp;gt; /docker-entrypoint-initdb.d writable shared&lt;/li>
&lt;li>/home/ashoka/Apps/podman/mysql8/data -&amp;gt; /var/lib/mysql writable shared&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Environment variabel:&lt;/p>
&lt;ul>
&lt;li>MYSQL_ROOT_PASSWORD : lahacia&lt;/li>
&lt;li>MYSQL_USER : ashoka&lt;/li>
&lt;li>MYSQL_PASSWORD : haha&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Buat file dan folder berikut:&lt;/p>
&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">└── mysql8
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├── custom.cnf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├── data
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> └── initdb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> └── grant.sql
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>file ~/A/podman►cat mysql8/custom.cnf&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[mysqld]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bind-address = 0.0.0.0
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>file ~/A/podman►cat mysql8/initdb/grant.sql&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">GRANT ALL PRIVILEGES ON *.* TO &amp;#39;ashoka&amp;#39;@&amp;#39;%&amp;#39; WITH GRANT OPTION;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>&lt;strong>Create and run&lt;/strong>&lt;/li>
&lt;/ul></description></item></channel></rss>