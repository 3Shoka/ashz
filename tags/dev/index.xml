<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>dev on Ashz</title><link>https://ashz.xyz/tags/dev/</link><description>Recent content in dev on Ashz</description><generator>Hugo -- gohugo.io</generator><language>id-id</language><lastBuildDate>Wed, 20 Apr 2022 13:14:51 +0700</lastBuildDate><atom:link href="https://ashz.xyz/tags/dev/index.xml" rel="self" type="application/rss+xml"/><item><title>Podman Mqtt Broker</title><link>https://ashz.xyz/p/podman-mqtt-broker/</link><pubDate>Wed, 20 Apr 2022 13:14:51 +0700</pubDate><guid>https://ashz.xyz/p/podman-mqtt-broker/</guid><description>&lt;p>Berikut ini langkah untuk membuat mqtt broker menggunakan eclipse mosquitto di podman&lt;/p>
&lt;h2 id="membuat-container">Membuat container&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>Masuk menu podman container&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Create container, isi field berikut&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Name&lt;/strong> : mqtt&lt;/li>
&lt;li>&lt;strong>Owner&lt;/strong> : User:ashoka&lt;/li>
&lt;li>&lt;strong>Image&lt;/strong> : docker.io/library/eclipse-mosquitto&lt;/li>
&lt;li>&lt;strong>Command&lt;/strong> : /usr/sbin/mosquitto -c /mosquitto/config/mosquitto.conf [tanpa terminal]&lt;/li>
&lt;li>&lt;strong>Port mapping&lt;/strong>:
&lt;ul>
&lt;li>host:1883 container 1883 tcp&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>Volume&lt;/strong>:
&lt;ul>
&lt;li>/home/ashoka/Apps/podman/mqtt/config -&amp;gt; /mosquitto/config writable private&lt;/li>
&lt;li>/home/ashoka/Apps/podman/mqtt/log -&amp;gt; /mosquitto/log writable private&lt;/li>
&lt;li>/home/ashoka/Apps/podman/mqtt/data -&amp;gt; /mosquitto/data writable private&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Buat file dan folder berikut:&lt;/p>
&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">./mqtt/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├── config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│   └── mosquitto.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├── data
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">└── log
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>file ~/A/podman►cat mqtt/config/mosquitto.conf&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">allow_anonymous true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">persistence true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">persistence_location /mosquitto/data/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">log_dest file /mosquitto/log/mosquitto.log
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">listener 1883
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>&lt;strong>Create and run&lt;/strong>&lt;/li>
&lt;/ul>
&lt;h2 id="test-broker-tanpa-user">Test broker tanpa user&lt;/h2>
&lt;p>Jika sudah berhasil running, coba test menggunakan aplikasi MQTT-Explorer atau aplikasi lain.
Isikan parameter berikut:&lt;/p>
&lt;ul>
&lt;li>Name: &lt;strong>broker podman&lt;/strong>&lt;/li>
&lt;li>Protocol: &lt;strong>mqtt://&lt;/strong>&lt;/li>
&lt;li>Host: &lt;strong>localhost&lt;/strong>&lt;/li>
&lt;li>Port: &lt;strong>1883&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://ashz.xyz/p/podman-mqtt-broker/mqtt-explorer-anonim.png"
width="664"
height="440"
srcset="https://ashz.xyz/p/podman-mqtt-broker/mqtt-explorer-anonim_hu7f520427ea5540f52b2fda34212ea855_29329_480x0_resize_box_3.png 480w, https://ashz.xyz/p/podman-mqtt-broker/mqtt-explorer-anonim_hu7f520427ea5540f52b2fda34212ea855_29329_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="test mqtt broker menggunakan mqtt-explorer tanpa login user"
class="gallery-image"
data-flex-grow="150"
data-flex-basis="362px"
>&lt;/p>
&lt;p>Klik &lt;strong>Save&lt;/strong> kemudian klik &lt;strong>Connect&lt;/strong>.&lt;/p>
&lt;p>Jika berhasil maka akan muncul tampilan berikut:&lt;/p>
&lt;p>&lt;img src="https://ashz.xyz/p/podman-mqtt-broker/mqtt-anonim-berhasil.png"
width="344"
height="243"
srcset="https://ashz.xyz/p/podman-mqtt-broker/mqtt-anonim-berhasil_hu6ebe8f958e5242990800f271a74c2807_33258_480x0_resize_box_3.png 480w, https://ashz.xyz/p/podman-mqtt-broker/mqtt-anonim-berhasil_hu6ebe8f958e5242990800f271a74c2807_33258_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="test mqtt broker anonim berhasil"
class="gallery-image"
data-flex-grow="141"
data-flex-basis="339px"
>&lt;/p>
&lt;h2 id="membuat-user">Membuat user&lt;/h2>
&lt;p>Pada konfigurasi mosquitto sebelumnya itu membolehkan/mengizinkan semua orang terhubung ke mqtt broker tanpa menggunakan username dan password. Agar tidak semua orang dapat memantau aktivitas pada broker kita, perlu dibuatkan user dan password untuk membatasi akses ke broker. Berikut ini langkah-langkah untuk membuat user dan password untuk mqtt broker.&lt;/p>
&lt;ul>
&lt;li>Masuk ke console container mqtt&lt;/li>
&lt;li>Jalankan perintah &lt;code>mosquitto_passwd -c /mosquitto/config/passwd ashoka&lt;/code>&lt;/li>
&lt;li>Akan muncul prompt untuk memasukkan password, masukkan password&lt;/li>
&lt;li>Update file &lt;code>mosquitto.conf&lt;/code>, untuk disable anonim dan tambahkan password file&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># file /mosquitto/config/mosquitto.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># disable user anonim
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">allow_anonymous false
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># set lokasi penyimpanan file password
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">password_file /mosquitto/config/passwd
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>Restart container&lt;/li>
&lt;/ul>
&lt;p>Setelah di restart coba konek ke broker dengan tanpa menggunakan user dan password, maka akan ada peringatan &lt;em>&lt;strong>Connection refused: Not authorized&lt;/strong>&lt;/em>. Kemudian coba konek menggunakan user dan password yang tadi sudah dibuat, maka akan berhasil terhubung ke broker.&lt;/p></description></item><item><title>Podman InfluxDB</title><link>https://ashz.xyz/p/podman-influxdb/</link><pubDate>Tue, 19 Apr 2022 10:05:48 +0700</pubDate><guid>https://ashz.xyz/p/podman-influxdb/</guid><description>&lt;p>Membuat container InfluxDB di podman menggunakan fedora cockpit&lt;/p>
&lt;ul>
&lt;li>
&lt;p>Masuk menu podman container&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Create container, isi field berikut&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Name&lt;/strong> : flux2&lt;/li>
&lt;li>&lt;strong>Owner&lt;/strong> : User:ashoka&lt;/li>
&lt;li>&lt;strong>Image&lt;/strong> : docker.io/library/influxdb&lt;/li>
&lt;li>&lt;strong>Command&lt;/strong> : influxd [tanpa terminal]&lt;/li>
&lt;li>&lt;strong>Port mapping&lt;/strong>:
&lt;ul>
&lt;li>host:8086, container:8086 tcp&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>Volume&lt;/strong>:
&lt;ul>
&lt;li>/home/ashoka/Apps/podman/flux2/data -&amp;gt; /var/lib/influxdb2 writable shared&lt;/li>
&lt;li>/home/ashoka/Apps/podman/flux2/config -&amp;gt; /etc/influxdb2 writable shared&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Environment variabel:&lt;/p>
&lt;ul>
&lt;li>DOCKER_INFLUXDB_INIT_MODE=setup&lt;/li>
&lt;li>DOCKER_INFLUXDB_INIT_USERNAME=ashoka&lt;/li>
&lt;li>DOCKER_INFLUXDB_INIT_PASSWORD=Ashokani&lt;/li>
&lt;li>DOCKER_INFLUXDB_INIT_ORG=lokal&lt;/li>
&lt;li>DOCKER_INFLUXDB_INIT_BUCKET=test&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Buat folder berikut:&lt;/p>
&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">└── flux2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">    ├── config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">    └── data
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>&lt;strong>Create and run&lt;/strong>&lt;/li>
&lt;/ul></description></item><item><title>Podman Node-RED</title><link>https://ashz.xyz/p/podman-node-red/</link><pubDate>Tue, 19 Apr 2022 10:05:48 +0700</pubDate><guid>https://ashz.xyz/p/podman-node-red/</guid><description>&lt;p>Membuat container Node-RED di podman menggunakan fedora cockpit&lt;/p>
&lt;ul>
&lt;li>
&lt;p>Masuk menu podman container&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Create container, isi field berikut&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Name&lt;/strong> : nodered&lt;/li>
&lt;li>&lt;strong>Owner&lt;/strong> : User:ashoka&lt;/li>
&lt;li>&lt;strong>Image&lt;/strong> : docker.io/nodered/node-red&lt;/li>
&lt;li>&lt;strong>Command&lt;/strong> : bash [tanpa terminal]&lt;/li>
&lt;li>&lt;strong>Port mapping&lt;/strong>:
&lt;ul>
&lt;li>host:1880, container:1880 tcp&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Environment variabel:&lt;/p>
&lt;ul>
&lt;li>NODE_RED_CREDENTIAL_SECRET=nganu&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>Create and run&lt;/strong>&lt;/p>
&lt;/li>
&lt;/ul></description></item><item><title>Podman Mysql 8</title><link>https://ashz.xyz/p/podman-mysql-8/</link><pubDate>Mon, 18 Apr 2022 11:35:57 +0700</pubDate><guid>https://ashz.xyz/p/podman-mysql-8/</guid><description>&lt;p>Membuat container MySQL 8 di podman menggunakan fedora cockpit&lt;/p>
&lt;ul>
&lt;li>
&lt;p>Masuk menu podman container&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Create container, isi field berikut&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Name&lt;/strong> : mysql8&lt;/li>
&lt;li>&lt;strong>Owner&lt;/strong> : User:ashoka&lt;/li>
&lt;li>&lt;strong>Image&lt;/strong> : docker.io/mysql/mysql-server&lt;/li>
&lt;li>&lt;strong>Command&lt;/strong> : mysqld [tanpa terminal]&lt;/li>
&lt;li>&lt;strong>Port mapping&lt;/strong>:
&lt;ul>
&lt;li>host:3306 container 3306 tcp&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>Volume&lt;/strong>:
&lt;ul>
&lt;li>/home/ashoka/Apps/podman/mysql8/custom.cnf -&amp;gt; /etc/my.cnf.d/custom.cnf writable shared&lt;/li>
&lt;li>/home/ashoka/Apps/podman/mysql8/initdb -&amp;gt; /docker-entrypoint-initdb.d writable shared&lt;/li>
&lt;li>/home/ashoka/Apps/podman/mysql8/data -&amp;gt; /var/lib/mysql writable shared&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Environment variabel:&lt;/p>
&lt;ul>
&lt;li>MYSQL_ROOT_PASSWORD : lahacia&lt;/li>
&lt;li>MYSQL_USER : ashoka&lt;/li>
&lt;li>MYSQL_PASSWORD : haha&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Buat file dan folder berikut:&lt;/p>
&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">└── mysql8
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├── custom.cnf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├── data
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> └── initdb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> └── grant.sql
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>file ~/A/podman►cat mysql8/custom.cnf&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[mysqld]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bind-address = 0.0.0.0
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>file ~/A/podman►cat mysql8/initdb/grant.sql&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">GRANT ALL PRIVILEGES ON *.* TO &amp;#39;ashoka&amp;#39;@&amp;#39;%&amp;#39; WITH GRANT OPTION;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>&lt;strong>Create and run&lt;/strong>&lt;/li>
&lt;/ul></description></item></channel></rss>